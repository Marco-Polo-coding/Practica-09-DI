import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as a}from"./index.D15Q2Owl.js";import{H as R,C as L}from"./Header.4W5XPu84.js";import{r as v,d as w,o as y}from"./firebaseConfig.hnSZw18Z.js";import{u as A,A as E}from"./AddToCart.23Og8Ces.js";import{u as U,C as I}from"./CoursePrice.BibBpTx-.js";import{u as z}from"./cartStore.4-LV2-Da.js";import"./react.esLmsmu2.js";const B=()=>{const[r,n]=a.useState([]),[i,c]=a.useState(0);a.useEffect(()=>{const s=v(w,"/"),d=y(s,h=>{const u=h.val();if(u){const p=Object.values(u).filter(m=>m.likes>100);n(p)}});return()=>d()},[]),a.useEffect(()=>{const s=setInterval(()=>{c(d=>(d+1)%r.length)},5e3);return()=>clearInterval(s)},[r]);const g=()=>{c(s=>(s+1)%r.length)},f=()=>{c(s=>s===0?r.length-1:s-1)};return r.length===0?e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Cargando cursos destacados..."}):e.jsx("div",{className:"bg-white-100 py-10 mb-0 min-h-[500px]",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${i*100}%)`},children:r.map(s=>e.jsxs("div",{className:"flex-shrink-0 w-full h-[500px] flex items-center justify-between bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-1/2 object-cover h-96"}),e.jsxs("div",{className:"p-6 w-1/2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:s.category}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full",children:s.level})]}),e.jsx("a",{href:`/posts/${s.id}`,className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Ver curso"})]})]},s.id))}),e.jsx("button",{onClick:f,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white text-gray-800 p-2 rounded-full shadow-md hover:shadow-lg transition",children:"⬅"}),e.jsx("button",{onClick:g,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white text-gray-800 p-2 rounded-full shadow-md hover:shadow-lg transition",children:"➡"})]})})},D=()=>{const[r,n]=a.useState([]),[i,c]=a.useState(!0),[g,f]=a.useState([]),[s,d]=a.useState(""),[h,u]=a.useState(""),p=A(t=>t.purchasedCourses);U(),a.useEffect(()=>{const t=v(w,"/"),l=y(t,o=>{const b=o.val();if(b){const j=Object.entries(b).map(([x,F])=>({id:x,...F})).filter(x=>x.title&&x.image);n(j);const P=[...new Set(j.map(x=>x.category))];f(P.sort())}c(!1)});return()=>l()},[]),a.useEffect(()=>{const t=new URLSearchParams(window.location.search),l=t.get("category"),o=t.get("level");l&&d(l),o&&u(o)},[]);const m=(t,l)=>{const o=new URL(window.location.href);l?o.searchParams.set(t,l):o.searchParams.delete(t),window.history.pushState({},"",o)},C=t=>{d(t.target.value),m("category",t.target.value)},N=t=>{u(t.target.value),m("level",t.target.value)},S=()=>{d(""),u("");const t=new URL(window.location.href);t.searchParams.delete("category"),t.searchParams.delete("level"),window.history.pushState({},"",t)},k=r.filter(t=>(!s||t.category===s)&&(!h||t.level===h));return i?e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Cargando cursos..."}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-0",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Nuestros Cursos"}),e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4 justify-center items-center",children:[e.jsx("div",{className:"w-full md:max-w-xs",children:e.jsxs("select",{value:s,onChange:C,className:"w-full py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[e.jsx("option",{value:"",children:"Todas las categorías"}),g.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"w-full md:max-w-xs",children:e.jsxs("select",{value:h,onChange:N,className:"w-full py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[e.jsx("option",{value:"",children:"Todos los niveles"}),e.jsx("option",{value:"Básico",children:"Básico"}),e.jsx("option",{value:"Avanzado",children:"Avanzado"})]})}),e.jsx("button",{onClick:S,className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Resetear Filtros"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(t=>{const l=p.includes(t.id);return e.jsxs("article",{className:`bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105 ${l?"border-2 border-green-500":""}`,children:[e.jsx("div",{className:"mb-4 relative h-48 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:t.category}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:t.level})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{children:["🕒 ",t.duration]}),e.jsxs("span",{children:["💵 ",e.jsx(I,{price:t.price})]}),e.jsxs("span",{children:["❤️ ",t.likes]})]}),e.jsx("a",{href:`/posts/${t.id}`,className:"inline-block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Ver curso"}),l?e.jsx("p",{className:"mt-2 text-green-600 font-semibold text-center",children:"¡Comprado!"}):e.jsx(E,{course:t})]},t.id)})})]})},V=({onCartClick:r})=>{const n=z(i=>i.cartItems.length);return e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("button",{className:"w-14 h-14 rounded-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center shadow-lg transition-colors relative",title:"Ver carrito",onClick:r,children:["🛒",n>0&&e.jsx("span",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",children:n})]})})},G=()=>{const[r,n]=a.useState(!1),i=()=>{n(!0)},c=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{"client:load":!0}),e.jsx(B,{"client:load":!0}),e.jsx(D,{"client:load":!0}),e.jsx(V,{"client:load":!0,onCartClick:i}),r&&e.jsx(L,{"client:load":!0,onClose:c})]})};export{G as default};
