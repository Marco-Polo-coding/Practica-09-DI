import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as a}from"./index.D15Q2Owl.js";import{c as y,u as n}from"./cartStore.CSZx0lk1.js";const j=y(t=>({email:null,purchasedCourses:[],setEmail:r=>t({email:r}),setPurchasedCourses:r=>t({purchasedCourses:r}),clearUserData:()=>t({email:null,purchasedCourses:[]})})),S=({course:t})=>{const r=n(s=>s.addToCart),d=n(s=>s.cartItems),u=j(s=>s.purchasedCourses),[g,l]=a.useState(!1),[m,o]=a.useState(!1),[x,i]=a.useState(!1),[h,f]=a.useState(!1),[p,c]=a.useState(!1);a.useEffect(()=>{const s=JSON.parse(localStorage.getItem("loggedInUser"));f(!!s)},[]);const b=()=>{if(!h){i(!0);return}if(u.includes(t.id)){o(!0);return}if(d.some(w=>w.id===t.id)){c(!0);return}r(t),l(!0),setTimeout(()=>l(!1),2e3)};return e.jsxs("div",{children:[e.jsx("button",{onClick:b,className:"mt-4 w-full text-center bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Añadir al carrito"}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"¡Curso añadido al carrito!"}),e.jsx("button",{onClick:()=>l(!1),className:"mt-4 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Cerrar"})]})}),m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-red-600",children:"Ya tienes este curso comprado."}),e.jsx("button",{onClick:()=>o(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})}),x&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Debes iniciar sesión para añadir cursos al carrito."}),e.jsx("button",{onClick:()=>i(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})}),p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"El curso ya está en el carrito."}),e.jsx("button",{onClick:()=>c(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})})]})};export{S as A,j as u};
