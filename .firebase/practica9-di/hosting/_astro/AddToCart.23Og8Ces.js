import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r}from"./index.D15Q2Owl.js";import{u as n}from"./cartStore.4-LV2-Da.js";import{c as y}from"./react.esLmsmu2.js";const j=y(t=>({email:null,purchasedCourses:[],setEmail:a=>t({email:a}),setPurchasedCourses:a=>t({purchasedCourses:a}),clearUserData:()=>t({email:null,purchasedCourses:[]})})),D=({course:t})=>{const a=n(s=>s.addToCart),d=n(s=>s.cartItems),u=j(s=>s.purchasedCourses),[g,l]=r.useState(!1),[m,o]=r.useState(!1),[x,i]=r.useState(!1),[h,f]=r.useState(!1),[p,c]=r.useState(!1);r.useEffect(()=>{const s=JSON.parse(localStorage.getItem("loggedInUser"));f(!!s)},[]);const b=()=>{if(!h){i(!0);return}if(u.includes(t.id)){o(!0);return}if(d.some(w=>w.id===t.id)){c(!0);return}a(t),l(!0),setTimeout(()=>l(!1),2e3)};return e.jsxs("div",{children:[e.jsx("button",{onClick:b,className:"mt-4 w-full text-center bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Añadir al carrito"}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"¡Curso añadido al carrito!"}),e.jsx("button",{onClick:()=>l(!1),className:"mt-4 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Cerrar"})]})}),m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-red-600",children:"Ya tienes este curso comprado."}),e.jsx("button",{onClick:()=>o(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})}),x&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Debes iniciar sesión para añadir cursos al carrito."}),e.jsx("button",{onClick:()=>i(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})}),p&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-800",children:"El curso ya está en el carrito."}),e.jsx("button",{onClick:()=>c(!1),className:"mt-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})})]})};export{D as A,j as u};
