import{j as e}from"./jsx-runtime.CLpGMVip.js";import{r as n}from"./index.D15Q2Owl.js";import{H as R,C as F}from"./Header.BYh9G0ll.js";import{r as v,d as w,o as y}from"./firebaseConfig.hnSZw18Z.js";import{u as L,A as U}from"./AddToCart.v-7M0En1.js";import{u as A}from"./cartStore.CSZx0lk1.js";const E=()=>{const[r,o]=n.useState([]),[c,d]=n.useState(0);n.useEffect(()=>{const s=v(w,"/"),i=y(s,h=>{const u=h.val();if(u){const f=Object.values(u).filter(p=>p.likes>100);o(f)}});return()=>i()},[]),n.useEffect(()=>{const s=setInterval(()=>{d(i=>(i+1)%r.length)},5e3);return()=>clearInterval(s)},[r]);const m=()=>{d(s=>(s+1)%r.length)},g=()=>{d(s=>s===0?r.length-1:s-1)};return r.length===0?e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Cargando cursos destacados..."}):e.jsx("div",{className:"bg-white-100 py-10 mb-0 min-h-[500px]",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${c*100}%)`},children:r.map(s=>e.jsxs("div",{className:"flex-shrink-0 w-full h-[500px] flex items-center justify-between bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-1/2 object-cover h-96"}),e.jsxs("div",{className:"p-6 w-1/2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:s.category}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full",children:s.level})]}),e.jsx("a",{href:`/posts/${s.id}`,className:"inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Ver curso"})]})]},s.id))}),e.jsx("button",{onClick:g,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white text-gray-800 p-2 rounded-full shadow-md hover:shadow-lg transition",children:"â¬…"}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white text-gray-800 p-2 rounded-full shadow-md hover:shadow-lg transition",children:"âž¡"})]})})},I=()=>{const[r,o]=n.useState([]),[c,d]=n.useState(!0),[m,g]=n.useState([]),[s,i]=n.useState(""),[h,u]=n.useState(""),f=L(t=>t.purchasedCourses);n.useEffect(()=>{const t=v(w,"/"),a=y(t,l=>{const b=l.val();if(b){const j=Object.entries(b).map(([x,P])=>({id:x,...P})).filter(x=>x.title&&x.image);o(j);const k=[...new Set(j.map(x=>x.category))];g(k.sort())}d(!1)});return()=>a()},[]),n.useEffect(()=>{const t=new URL(window.location.href),a=t.searchParams.get("category"),l=t.searchParams.get("level");a&&i(a),l&&u(l)},[]);const p=t=>{const a=t.target.value,l=new URL(window.location.href);a?(l.searchParams.set("category",a),i(a)):(l.searchParams.delete("category"),i("")),window.history.pushState({},"",l)},C=t=>{const a=t.target.value,l=new URL(window.location.href);a?(l.searchParams.set("level",a),u(a)):(l.searchParams.delete("level"),u("")),window.history.pushState({},"",l)},N=()=>{const t=new URL(window.location.href);t.searchParams.delete("category"),t.searchParams.delete("level"),window.history.pushState({},"",t),i(""),u("")},S=r.filter(t=>{const a=!s||t.category===s,l=!h||t.level===h;return a&&l});return c?e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Cargando cursos..."}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-0",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Nuestros Cursos"}),e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4 justify-center items-center",children:[e.jsx("div",{className:"w-full md:max-w-xs",children:e.jsxs("select",{value:s,onChange:p,className:"w-full py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[e.jsx("option",{value:"",children:"Todas las categorÃ­as"}),m.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"w-full md:max-w-xs",children:e.jsxs("select",{value:h,onChange:C,className:"w-full py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[e.jsx("option",{value:"",children:"Todos los niveles"}),e.jsx("option",{value:"BÃ¡sico",children:"BÃ¡sico"}),e.jsx("option",{value:"Avanzado",children:"Avanzado"})]})}),e.jsx("div",{children:e.jsx("button",{onClick:N,className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Resetear Filtros"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(t=>{const a=f.includes(t.id);return e.jsxs("article",{className:`bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105 ${a?"border-2 border-green-500":""}`,children:[e.jsx("div",{className:"mb-4 relative h-48 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:t.category}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:t.level})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{children:["ðŸ•’ ",t.duration]}),e.jsxs("span",{children:["ðŸ’µ ",t.price,"â‚¬"]}),e.jsxs("span",{children:["â¤ï¸ ",t.likes]})]}),e.jsx("a",{href:`/posts/${t.id}`,className:"inline-block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Ver curso"}),a?e.jsx("p",{className:"mt-2 text-green-600 font-semibold text-center",children:"Â¡Comprado!"}):e.jsx(U,{course:t})]},t.id)})})]})},z=({onCartClick:r})=>{const o=A(c=>c.cartItems.length);return e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("button",{className:"w-14 h-14 rounded-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center shadow-lg transition-colors relative",title:"Ver carrito",onClick:r,children:["ðŸ›’",o>0&&e.jsx("span",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",children:o})]})})},T=()=>{const[r,o]=n.useState(!1),c=()=>{o(!0)},d=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{"client:load":!0}),e.jsx(E,{"client:load":!0}),e.jsx(I,{"client:load":!0}),e.jsx(z,{"client:load":!0,onCartClick:c}),r&&e.jsx(F,{"client:load":!0,onClose:d})]})};export{T as default};
